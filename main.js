(()=>{"use strict";class t{constructor(t,e,o,a){this.title=t,this.description=e,this.date=o,this.priority=a,this.completed=!1}getTitle(){return this.title}getDescription(){return this.description}getDate(){return this.date}getPriority(){return this.priority}isComplete(){return this.completed}setTitle(t){this.title=t}setDescription(t){this.description=t}setDate(t){this.date=t}setPriority(t){this.priority=t}setCompleted=t=>{this.completed=t}}class e{constructor(t){this.name=t,this.taskList=[]}getName(){return this.name}addTask(t){this.taskList.push(t)}getTaskList(){return this.taskList}getTask(t){return this.taskList[t]}setTaskList(t){this.taskList=t}deleteTask(t){this.taskList.splice(t,1)}}function o(t,e){let o=document.querySelector("#lowerSection"),a=document.createElement("button");a.classList.add("projectButton"),a.textContent=t,a.setAttribute("data-id",e);let i=document.createElement("button");i.textContent="X",i.classList.add("deleteProjectButton"),i.setAttribute("data-id",e);let s=document.createElement("div");s.classList.add("projectButtonContainer"),s.setAttribute("data-id",e),s.appendChild(i),s.appendChild(a),o.appendChild(s)}function a(t,e){document.querySelectorAll(".deleteProjectButton").forEach((o=>{o.addEventListener("click",(()=>{let a=document.querySelector("#lowerSection"),i=o.getAttribute("data-id"),s=document.querySelector(`.projectButtonContainer[data-id="${i}"]`);a.removeChild(s),t.splice(i,1,{}),e(),localStorage.setItem("project",JSON.stringify(t)),event.stopImmediatePropagation()}))}))}const i=document.querySelector(".createProjectButton"),s=document.querySelector("#modalCreateProject"),l=document.querySelector("#submitProjectButton"),d=document.querySelector("#addTask"),n=document.querySelector("#homeButton"),r=document.querySelector("#modalAddTask"),c=document.querySelector("#submitTaskButton"),u=document.querySelector("#modalEditTask"),m=document.querySelector("#submitTaskEditButton"),p=document.querySelector(".closeDetail");let y=document.querySelector("#modalDetails");window.localStorage;let g=JSON.parse(localStorage.getItem("project")||"[]").filter((t=>0!==Object.keys(t).length)),k=JSON.parse(localStorage.getItem("homeTask")||"[]"),S=[],h=[],L=new e("home"),C=[];function v(t,e){let o=new t;return Object.assign(o,e)}function E(){document.querySelectorAll(".projectButton").forEach((t=>{t.addEventListener("click",(()=>{d.setAttribute("data-id",t.getAttribute("data-id"));let e=C[t.getAttribute("data-id")];q(),f(e)}))}))}function f(t){t.getTaskList().forEach((e=>{!function(t,e,o,a,i,s){let l=document.createElement("p");l.textContent=t,l.classList.add("title");let d=document.createElement("p");d.textContent=e,d.classList.add("description");let n=document.createElement("div");n.classList.add("firstText"),n.appendChild(l),n.appendChild(d);let r=document.createElement("button");r.textContent="âœ“",r.classList.add("completedButton"),r.setAttribute("data-id",i);let c=document.createElement("button");c.textContent="X",c.classList.add("deleteButton"),c.setAttribute("data-id",i);let u=document.createElement("div");u.classList.add("firstButtons"),u.appendChild(r),u.appendChild(c);let m=document.createElement("div");m.classList.add("firstPart"),m.appendChild(u),m.appendChild(n);let p=document.createElement("p");p.textContent=o,p.classList.add("date");let y=document.createElement("p");y.textContent=a,y.classList.add("priority");let g=document.createElement("div");g.classList.add("secondText"),g.appendChild(p),g.appendChild(y);let k=document.createElement("button");k.textContent="...",k.classList.add("detailsButton"),k.setAttribute("data-id",i);let S=document.createElement("button");S.classList.add("editButton");const h=document.querySelector("#modalEditTask"),L=document.querySelector("#submitTaskEditButton");S.addEventListener("click",(()=>{h.style.display="block",L.setAttribute("data-id",i)}));let C=document.createElement("div");C.classList.add("secondButtons"),C.appendChild(k),C.appendChild(S);let v=document.createElement("div");v.classList.add("secondPart"),v.appendChild(g),v.appendChild(C);let E=document.createElement("div");E.classList.add("task"),E.appendChild(m),E.appendChild(v),E.setAttribute("data-taskId",i),1==s?E.classList.add("completed"):E.classList.remove("completed"),document.querySelector("#display").appendChild(E)}(e.getTitle(),e.getDescription(),e.getDate(),e.getPriority(),t.getTaskList().indexOf(e),e.isComplete()),function(t,e,o){document.querySelectorAll(".completedButton").forEach((function(a){a.addEventListener("click",(()=>{let i=a.getAttribute("data-id");if(-1==t){let t=o.getTask(i),e=document.querySelector(`[data-taskId="${i}"]`);console.log(t.isComplete()),0==t.isComplete()?(console.log("false"+t),t.setCompleted(!0),e.classList.add("completed"),localStorage.setItem("homeTask",JSON.stringify(o.taskList)),event.stopImmediatePropagation()):1==t.isComplete()&&(console.log("true"+t),t.setCompleted(!1),e.classList.remove("completed"),localStorage.setItem("homeTask",JSON.stringify(o.taskList)),event.stopImmediatePropagation())}else{let o=e[t].getTask(i),s=document.querySelector(`[data-taskId="${i}"]`);console.log(s),console.log(o),console.log(e[t].getTaskList()),console.log(a),0==o.isComplete()?(o.setCompleted(!0),s.classList.add("completed"),localStorage.setItem("project",JSON.stringify(e)),event.stopImmediatePropagation()):1==o.isComplete()&&(o.setCompleted(!1),s.classList.remove("completed"),localStorage.setItem("project",JSON.stringify(e)),event.stopImmediatePropagation())}}))}))}(C.indexOf(t),C,L),function(t,e,o,a,i){document.querySelectorAll(".deleteButton").forEach((s=>{s.addEventListener("click",(()=>{let l=s.getAttribute("data-id");if(-1==t){let t=document.querySelector(`[data-taskId="${l}"]`);document.querySelector("#display").removeChild(t),o.deleteTask(l),a(),i(o),localStorage.setItem("homeTask",JSON.stringify(o.taskList)),event.stopImmediatePropagation()}else{let o=document.querySelector(`[data-taskId="${l}"]`);document.querySelector("#display").removeChild(o),e[t].deleteTask(l),a(),i(e[t]),localStorage.setItem("project",JSON.stringify(e)),event.stopImmediatePropagation()}}))}))}(C.indexOf(t),C,L,q,f),function(t){let e=document.querySelectorAll(".detailsButton"),o=document.querySelector(".detailName"),a=document.querySelector(".detailDescription"),i=document.querySelector(".detailDate"),s=document.querySelector(".detailPriority");e.forEach((e=>{e.addEventListener("click",(()=>{if(console.log(t),y.style.display="block",-1==t){let t=L.getTask(e.getAttribute("data-id"));o.textContent=t.getTitle(),a.textContent=t.getDescription(),i.textContent=t.getDate(),s.textContent=t.getPriority(),event.stopImmediatePropagation()}else{let l=C[t].getTask(e.getAttribute("data-id"));o.textContent=l.getTitle(),a.textContent=l.getDescription(),i.textContent=l.getDate(),s.textContent=l.getPriority(),event.stopImmediatePropagation()}}))}))}(C.indexOf(t))}))}function q(){let t=document.querySelector("#display");document.querySelectorAll(".task").forEach((e=>{t.removeChild(e)}))}k.forEach((e=>{h.push(v(t,e))})),L.setTaskList(h),h=[],g.forEach((o=>{let a=v(e,o);a.getTaskList().forEach((e=>{S.push(v(t,e))})),a.setTaskList(S),S=[],C.push(a)})),i.addEventListener("click",(()=>{s.style.display="block"})),window.addEventListener("click",(function(t){t.target==s?s.style.display="none":t.target==r?r.style.display="none":t.target==u?u.style.display="none":t.target==y&&(y.style.display="none")})),l.addEventListener("click",(()=>{let t=document.querySelector("#projectNameInput").value,i=new e(t);C.push(i),localStorage.setItem("project",JSON.stringify(C)),o(i.getName(),C.indexOf(i)),E(),a(C,q),s.style.display="none"})),n.addEventListener("click",(()=>{d.setAttribute("data-id",n.getAttribute("data-id")),q(),f(L)})),d.addEventListener("click",(()=>{r.style.display="block"})),c.addEventListener("click",(()=>{const e=document.querySelector("#taskNameInput"),o=document.querySelector("#taskDescriptionInput"),a=document.querySelector("#taskDateInput"),i=document.querySelector("#priorityInput");let s=d.getAttribute("data-id"),l=new t(e.value,o.value,a.value,i.value);"home"==s?(L.addTask(l),q(),f(L),localStorage.setItem("homeTask",JSON.stringify(L.taskList))):(C[s].addTask(l),q(),f(C[s]),localStorage.setItem("project",JSON.stringify(C))),r.style.display="none"})),m.addEventListener("click",(()=>{const t=document.querySelector("#taskNameEditInput"),e=document.querySelector("#taskDescriptionEditInput"),o=document.querySelector("#taskDateEditInput"),a=document.querySelector("#priorityEditInput");let i=d.getAttribute("data-id"),s=m.getAttribute("data-id");if("home"==i){let i=L.getTask(s);i.setTitle(t.value),i.setDescription(e.value),i.setDate(o.value),i.setPriority(a.value),localStorage.setItem("homeTask",JSON.stringify(L.taskList))}else{let l=C[i].getTask(s);l.setTitle(t.value),l.setDescription(e.value),l.setDate(o.value),l.setPriority(a.value),localStorage.setItem("project",JSON.stringify(C))}u.style.display="none",q(),"home"==i&&f(L),f(C[i])})),p.addEventListener("click",(()=>{y.style.display="none"})),f(L),C.forEach((t=>{o(t.getName(),C.indexOf(t)),E(),a(C,q)}))})();